{% extends "Stores/base.html" %}
{% load static %}

{% block title %} {{ store.store_name }} Dashboard {% endblock %}

{% block styles %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'stores/css/store_dashboard.css' %}">
{% endblock %}

{% block content %}
    <div class="container" id="store-dashboard-main-container">
        <div class="row">
            <div class="col-7 mx-auto" id="header-container">
                <div class="card text-center" id="store-header-card">
                    <div class="card-body py-4">
                        <!-- TODO could put store image/logo here -->
                        <h3 class="mb-0">{{ store.store_name }} Dashboard</h3>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-5">
                <div class="card" id="general-info-card">
                    <div class="card-header info-card-header justify-content-between align-items-center d-flex">
                        <h3>General Information</h3>
                        <button class="btn btn-sm btn-primary">Edit Information</button>
                    </div>
                    <div class="card-body">
                        <p><strong>Store Name:</strong> {{ store.store_name }}</p>
                        <p><strong>Contact Email:</strong> {{ store.contact_email }}</p>
                        <p><strong>Store URL:</strong> {{ store.store_url }}</p>
                        <p><strong>Description:</strong> {{ store.description }}</p>
                    </div>
                </div>
            </div>
            <div class="col-7">
                <div class="card" id="recent-orders-card">
                    <div class="card-header info-card-header justify-content-between align-items-center d-flex">
                        <h3>Recent Orders</h3>
                        <button class="btn btn-sm btn-primary">Refresh</button>
                    </div>
                    <div class="card-body d-flex justify-content-center align-items-center flex-column">
                        {% if recent_orders %}
                            <table class="table table-striped table-bordered">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Customer</th>
                                        <th>Date</th>
                                        <th>Total</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for order in recent_orders %}
                                        <tr>
                                            <td>{{ order.id }}</td>
                                            <td>{{ order.user.first_name }} {{ order.user.last_name }}</td>
                                            <td>{{ order.created_at|date:"M-d-Y" }}</td>
                                            <td>${{ order.total }}</td>
                                            <td>{{ order.status }}</td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p>No recent orders.</p>
                        {% endif %}
                    </div>
                    <div class="card-footer d-flex justify-content-center">
                        <a href="/order_dash" class="btn btn-sm btn-secondary">View All Orders</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}