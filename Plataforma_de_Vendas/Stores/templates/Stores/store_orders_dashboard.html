{% extends "Stores/base.html" %}
{% load static %}

{% block title %} Order Dashboard {% endblock %}

{% block styles %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static 'stores/css/store_orders_dashboard.css' %}">
{% endblock %}

{% block scripts %}
    {{ block.super }}
    <script src="{% static 'stores/js/order_dashboard.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="container" id="orders-dashboard-main-container">
        <div class="card">
            <div class="card-header">
                <div class="d-flex align-items-center justify-content-between mb-3">
                    <div class="flex-grow-1 text-center">
                        <h3 class="mb-0">Order Dashboard</h3>
                    </div>
                    <div class="ms-3">
                        <button class="btn btn-sm btn-primary" id="refresh-button">Refresh</button>
                    </div>
                </div>
                <div class="d-flex flex-wrap justify-content-center gap-2">
                    <div class="d-flex" style="max-width: 500px;">
                        <div class="position-relative flex-grow-1 me-2">
                            <input 
                                type="text" 
                                class="form-control pe-5" 
                                id="order-search-input" 
                                placeholder="Search Orders..."
                            >
                            <button 
                                type="button" 
                                id="clear-search-button" 
                                class="btn btn-sm position-absolute top-50 end-0 translate-middle-y me-2 d-none"
                                style="border: none; background: transparent;"
                            >
                                <i class="bi bi-x-circle text-muted"></i>
                            </button>
                        </div>
                        <button type="button" id="search-button" class="btn btn-primary">
                            <i class="bi bi-search"></i>
                        </button>
                    </div>
                    <div class="input-group" style="max-width: 220px;">
                        <label class="input-group-text" for="order-filter-selector">Filter</label>
                        <select class="form-select update-selector" id="order-filter-selector">
                            <option value="">All</option>
                            <option value="PENDING">Pending</option>
                            <option value="IN_PROGRESS">In Progress</option>
                            <option value="DONE">Done</option>
                        </select>
                    </div>
                    <div class="input-group" style="max-width: 250px;">
                        <label class="input-group-text" for="order-sort-selector">Sort By</label>
                        <select class="form-select update-selector" id="order-sort-selector">
                            <option value="newest">Date (Newest)</option>
                            <option value="oldest">Date (Oldest)</option>
                            <option value="highest_total">Total (High to Low)</option>
                            <option value="lowest_total">Total (Low to High)</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-bordered mb-0">
                        <thead class="table-light">
                            <tr>
                                <th scope="col">Order ID</th>
                                <th scope="col">Customer Username</th>
                                <th scope="col">Customer Name</th>
                                <th scope="col">Date</th>
                                <th scope="col">Total</th>
                                <th scope="col">Status</th>
                                <th scope="col" class="text-center">
                                    <i class="bi bi-eye"></i>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="orders-table-body"></tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer d-flex flex-column flex-md-row justify-content-center align-items-center gap-3">
                <div class="d-flex flex-wrap justify-content-center align-items-center gap-3">
                    <span id="total-orders-count" class="fw-semibold">Total: 0</span>
                </div>

                <div class="d-flex justify-content-center align-items-center gap-2">
                    <button class="btn btn-outline-secondary btn-sm" id="prev-page-button" disabled>
                        <i class="bi bi-chevron-left"></i> Prev
                    </button>
                    <span id="page-number" class="fw-semibold">Page 1</span>
                    <button class="btn btn-outline-secondary btn-sm" id="next-page-button">
                        Next <i class="bi bi-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>    
{% endblock %}